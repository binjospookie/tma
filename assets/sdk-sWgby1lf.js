(function(){const O={};let i="";try{i=location.hash.toString()}catch{}const P=C(i),te=V("initParams");if(te)for(const p in te)typeof P[p]>"u"&&(P[p]=te[p]);F("initParams",P);let s=!1,Y;try{if(s=window.parent!=null&&window!=window.parent,s){window.addEventListener("message",function(p){if(p.source===window.parent){try{var _=JSON.parse(p.data)}catch{return}if(!(!_||!_.eventType))if(_.eventType=="set_custom_style")p.origin==="https://web.telegram.org"&&(Y.innerHTML=_.eventData);else if(_.eventType=="reload_iframe"){try{window.parent.postMessage(JSON.stringify({eventType:"iframe_will_reload"}),"*")}catch{}location.reload()}else J(_.eventType,_.eventData)}}),Y=document.createElement("style"),document.head.appendChild(Y);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready",eventData:{reload_supported:!0}}),"*")}catch{}}}catch{}function U(p){try{return p=p.replace(/\+/g,"%20"),decodeURIComponent(p)}catch{return p}}function C(p){p=p.replace(/^#/,"");const _={};if(!p.length)return _;if(p.indexOf("=")<0&&p.indexOf("?")<0)return _._path=U(p),_;const k=p.indexOf("?");if(k>=0){const j=p.substr(0,k);_._path=U(j),p=p.substr(k+1)}const S=Z(p);for(const j in S)_[j]=S[j];return _}function Z(p){const _={};if(!p.length)return _;const k=p.split("&");let S,j,re,_e;for(S=0;S<k.length;S++)j=k[S].split("="),re=U(j[0]),_e=j[1]==null?null:U(j[1]),_[re]=_e;return _}function w(p,_){const k=p.indexOf("#");if(k<0)return p+"#"+_;const S=p.substr(k+1);return S.indexOf("=")>=0||S.indexOf("?")>=0?p+"&"+_:S.length>0?p+"?"+_:p+_}function me(p,_,k){if(_||(_=function(){}),k===void 0&&(k=""),console.log("[Telegram.WebView] > postEvent",p,k),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(p,JSON.stringify(k)),_();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:p,eventData:k})),_();else if(s)try{let S="https://web.telegram.org";S="*",window.parent.postMessage(JSON.stringify({eventType:p,eventData:k}),S),_()}catch(S){_(S)}else _({notAvailable:!0})}function J(p,_){console.log("[Telegram.WebView] < receiveEvent",p,_),D(p,function(k){k(p,_)})}function D(p,_){const k=O[p];if(!(k===void 0||!k.length))for(let S=0;S<k.length;S++)try{_(k[S])}catch{}}function oe(p,_){O[p]===void 0&&(O[p]=[]),O[p].indexOf(_)===-1&&O[p].push(_)}function K(p,_){if(O[p]===void 0)return;const k=O[p].indexOf(_);k!==-1&&O[p].splice(k,1)}function F(p,_){try{return window.sessionStorage.setItem("__telegram__"+p,JSON.stringify(_)),!0}catch{}return!1}function V(p){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+p))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:P,isIframe:s,onEvent:oe,offEvent:K,postEvent:me,receiveEvent:J,callEventCallbacks:D},window.Telegram.Utils={urlSafeDecode:U,urlParseQueryString:Z,urlParseHashParams:C,urlAppendHashParams:w,sessionStorageSet:F,sessionStorageGet:V},window.TelegramGameProxy_receiveEvent=J,window.TelegramGameProxy={receiveEvent:J}})();(function(){const O=window.Telegram.Utils,i=window.Telegram.WebView,P=i.initParams,te=i.isIframe,s={};let Y="",U={},C={},Z="light",w="6.0",me="unknown",J=!0,D=!1,oe=!1,K="bg_color",F="bg_color",V=null;if(P.tgWebAppData&&P.tgWebAppData.length){Y=P.tgWebAppData,U=O.urlParseQueryString(Y);for(const e in U){const t=U[e];try{(t.substr(0,1)=="{"&&t.substr(-1)=="}"||t.substr(0,1)=="["&&t.substr(-1)=="]")&&(U[e]=JSON.parse(t))}catch{}}}const p=O.sessionStorageGet("themeParams");if(P.tgWebAppThemeParams&&P.tgWebAppThemeParams.length){const e=P.tgWebAppThemeParams;try{const t=JSON.parse(e);t&&we(t)}catch{}}p&&we(p);const _=O.sessionStorageGet("defaultColors");if(P.tgWebAppDefaultColors&&P.tgWebAppDefaultColors.length){const e=P.tgWebAppDefaultColors;try{const t=JSON.parse(e);t&&Me(t)}catch{}}_&&Me(_),P.tgWebAppVersion&&(w=P.tgWebAppVersion),P.tgWebAppPlatform&&(me=P.tgWebAppPlatform);const k=O.sessionStorageGet("isFullscreen");P.tgWebAppFullscreen&&ve(!0),k&&ve(k=="yes");const S=O.sessionStorageGet("isOrientationLocked");S&&Ie(S=="yes");function j(e,t){t.theme_params&&(we(t.theme_params),window.Telegram.WebApp.MainButton.setParams({}),window.Telegram.WebApp.SecondaryButton.setParams({}),Te(),Pe(),Se(),h("themeChanged"))}let re=window.innerHeight;function _e(e,t){t.height&&(window.removeEventListener("resize",Oe),Ae(t))}function Oe(e){re!=window.innerHeight&&(re=window.innerHeight,h("viewportChanged",{isStateStable:!0}))}function Qe(e,t){t&&Xe(t)}function Je(e,t){t&&Ye(t)}function Ke(e,t){t.is_visible?(J=!0,h("activated")):(J=!1,h("deactivated"))}function $e(e){if(e.metaKey||e.ctrlKey)return;let t=e.target;for(;t.tagName!="A"&&t.parentNode;)t=t.parentNode;t.tagName=="A"&&t.target!="_blank"&&(t.protocol=="http:"||t.protocol=="https:")&&t.hostname=="t.me"&&(s.openTgLink(t.href),e.preventDefault())}function H(e){return e.toString().replace(/^\s+|\s+$/g,"")}function h(e){const t=Array.prototype.slice.call(arguments);e=t.shift(),i.callEventCallbacks("webview:"+e,function(o){o.apply(s,t)})}function he(e,t){i.onEvent("webview:"+e,t)}function ye(e,t){i.offEvent("webview:"+e,t)}function R(e,t){const o=document.documentElement;o&&o.style&&o.style.setProperty&&o.style.setProperty("--tg-"+e,t)}function ve(e){D=!!e,O.sessionStorageSet("isFullscreen",D?"yes":"no")}function Ie(e){oe=!!e,O.sessionStorageSet("isOrientationLocked",oe?"yes":"no")}function we(e){e.bg_color=="#1c1c1d"&&e.bg_color==e.secondary_bg_color&&(e.secondary_bg_color="#2c2c2e");let t;for(let o in e)(t=ne(e[o]))&&(C[o]=t,o=="bg_color"&&(Z=bt(t)?"dark":"light",R("color-scheme",Z)),o="theme-"+o.split("_").join("-"),R(o,t));O.sessionStorageSet("themeParams",C)}function Me(e){Z=="dark"?(e.bg_dark_color&&(K=e.bg_dark_color),e.header_dark_color&&(F=null,V=e.header_dark_color)):(e.bg_color&&(K=e.bg_color),e.header_color&&(F=null,V=e.header_color)),O.sessionStorageSet("defaultColors",e)}const N={};function je(e){let t=100;for(;--t;){let o="",n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",r=n.length;for(let l=0;l<e;l++)o+=n[Math.floor(Math.random()*r)];if(!N[o])return N[o]={},o}throw Error("WebAppCallbackIdGenerateFailed")}let ie=!1,se=!1,Re=!0;function Ae(e){typeof e<"u"&&(Re=!!e.is_expanded,ie=e.height,e.is_state_stable&&(se=e.height),h("viewportChanged",{isStateStable:!!e.is_state_stable}));let t,o;ie!==!1?t=ie-M+"px":t=M?"calc(100vh - "+M+"px)":"100vh",se!==!1?o=se-M+"px":o=M?"calc(100vh - "+M+"px)":"100vh",R("viewport-height",t),R("viewport-stable-height",o)}const G={top:0,bottom:0,left:0,right:0};function Xe(e){typeof e<"u"&&(typeof e.top<"u"&&(G.top=e.top),typeof e.bottom<"u"&&(G.bottom=e.bottom),typeof e.left<"u"&&(G.left=e.left),typeof e.right<"u"&&(G.right=e.right),h("safeAreaChanged")),R("safe-area-inset-top",G.top+"px"),R("safe-area-inset-bottom",G.bottom+"px"),R("safe-area-inset-left",G.left+"px"),R("safe-area-inset-right",G.right+"px")}const z={top:0,bottom:0,left:0,right:0};function Ye(e){typeof e<"u"&&(typeof e.top<"u"&&(z.top=e.top),typeof e.bottom<"u"&&(z.bottom=e.bottom),typeof e.left<"u"&&(z.left=e.left),typeof e.right<"u"&&(z.right=e.right),h("contentSafeAreaChanged")),R("content-safe-area-inset-top",z.top+"px"),R("content-safe-area-inset-bottom",z.bottom+"px"),R("content-safe-area-inset-left",z.left+"px"),R("content-safe-area-inset-right",z.right+"px")}let Ee=!1;function Ze(e){if(!y("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+w);return}Ee=!!e,i.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:Ee})}let We=!0;function De(e){if(!y("7.7")){console.warn("[Telegram.WebApp] Changing swipes behavior is not supported in version "+w);return}We=!!e,i.postEvent("web_app_setup_swipe_behavior",!1,{allow_vertical_swipe:We})}function et(e,t){ve(t.is_fullscreen),h("fullscreenChanged")}function tt(e,t){t.error=="ALREADY_FULLSCREEN"&&!D&&ve(!0),h("fullscreenFailed",{error:t.error})}function ot(e){if(!y("8.0")){console.warn("[Telegram.WebApp] Orientation locking is not supported in version "+w);return}Ie(e),i.postEvent("web_app_toggle_orientation_lock",!1,{locked:oe})}let le=[];function nt(e,t){h("homeScreenAdded")}function rt(e,t){const o=t.status||"unknown";if(le.length>0){for(let n=0;n<le.length;n++){const r=le[n];r(o)}le=[]}h("homeScreenChecked",{status:o})}let $=!1;function it(e,t){if($){const o=$;$=!1,o.callback&&o.callback(!0),h("shareMessageSent")}}function st(e,t){if($){const o=$;$=!1,o.callback&&o.callback(!1),h("shareMessageFailed",{error:t.error})}}let X=!1;function lt(e,t){if(X){const o=X;X=!1,o.callback&&o.callback(!0),h("emojiStatusSet")}}function at(e,t){if(X){const o=X;X=!1,o.callback&&o.callback(!1),h("emojiStatusFailed",{error:t.error})}}let ae=!1;function ct(e,t){if(ae){const o=ae;ae=!1,o.callback&&o.callback(t.status=="allowed"),h("emojiStatusAccessRequested",{status:t.status})}}var Q=!1;function ut(){return F=="secondary_bg_color"?C.secondary_bg_color:F=="bg_color"?C.bg_color:V}function pt(e){if(!y("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+w);return}y("6.9")||(C.bg_color&&C.bg_color==e?e="bg_color":C.secondary_bg_color&&C.secondary_bg_color==e&&(e="secondary_bg_color"));let t=null,o=null;if(e=="bg_color"||e=="secondary_bg_color")o=e;else if(y("6.9")&&(t=ne(e),!t))throw console.error("[Telegram.WebApp] Header color format is invalid",e),Error("WebAppHeaderColorInvalid");if(!y("6.9")&&o!="bg_color"&&o!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",e),Error("WebAppHeaderColorKeyInvalid");F=o,V=t,Te()}let Le=null,ke=null;function Te(){(Le!=F||ke!=V)&&(Le=F,ke=V,ke?i.postEvent("web_app_set_header_color",!1,{color:V}):i.postEvent("web_app_set_header_color",!1,{color_key:F}))}function Ue(){return K=="secondary_bg_color"?C.secondary_bg_color:K=="bg_color"?C.bg_color:K}function ft(e){if(!y("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+w);return}let t;if(e=="bg_color"||e=="secondary_bg_color")t=e;else if(t=ne(e),!t)throw console.error("[Telegram.WebApp] Background color format is invalid",e),Error("WebAppBackgroundColorInvalid");K=t,Pe()}let Fe=null;function Pe(){const e=Ue();Fe!=e&&(Fe=e,i.postEvent("web_app_set_background_color",!1,{color:e}))}let ce="bottom_bar_bg_color";function ue(){return ce=="bottom_bar_bg_color"?C.bottom_bar_bg_color||C.secondary_bg_color||"#ffffff":ce=="secondary_bg_color"?C.secondary_bg_color:ce=="bg_color"?C.bg_color:ce}function dt(e){if(!y("7.10")){console.warn("[Telegram.WebApp] Bottom bar color is not supported in version "+w);return}let t;if(e=="bg_color"||e=="secondary_bg_color"||e=="bottom_bar_bg_color")t=e;else if(t=ne(e),!t)throw console.error("[Telegram.WebApp] Bottom bar color format is invalid",e),Error("WebAppBottomBarColorInvalid");ce=t,Se(),window.Telegram.WebApp.SecondaryButton.setParams({})}let Ve=null;function Se(){const e=ue();Ve!=e&&(Ve=e,i.postEvent("web_app_set_bottom_bar_color",!1,{color:e})),P.tgWebAppDebug&&Ne()}function ne(e){e+="";let t;if(t=/^\s*#([0-9a-f]{6})\s*$/i.exec(e))return"#"+t[1].toLowerCase();if(t=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(e))return("#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]).toLowerCase();if(t=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(e)){let o=parseInt(t[1]),n=parseInt(t[2]),r=parseInt(t[3]);return o=(o<16?"0":"")+o.toString(16),n=(n<16?"0":"")+n.toString(16),r=(r<16?"0":"")+r.toString(16),"#"+o+n+r}return!1}function bt(e){e=e.replace(/[\s#]/g,""),e.length==3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]);const t=parseInt(e.substr(0,2),16),o=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16);return Math.sqrt(.299*(t*t)+.587*(o*o)+.114*(n*n))<120}function gt(e,t){typeof e!="string"&&(e=""),typeof t!="string"&&(t=""),e=e.replace(/^\s+|\s+$/g,"").split("."),t=t.replace(/^\s+|\s+$/g,"").split(".");let o=Math.max(e.length,t.length),n,r,l;for(n=0;n<o;n++)if(r=parseInt(e[n])||0,l=parseInt(t[n])||0,r!=l)return r>l?1:-1;return 0}function y(e){return gt(w,e)>=0}function mt(e){if(window.Blob)try{return new Blob([e]).size}catch{}let t=e.length;for(let o=e.length-1;o>=0;o--){const n=e.charCodeAt(o);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&o--}return t}const _t=function(){let e=!1;const t={};Object.defineProperty(t,"isVisible",{set:function(b){W({is_visible:b})},get:function(){return e},enumerable:!0});let o=null;i.onEvent("back_button_pressed",n);function n(){h("backButtonClicked")}function r(){return{is_visible:e}}function l(b){return typeof b>"u"&&(b=r()),JSON.stringify(b)}function g(){return y("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+w),!1)}function u(){const b=r(),E=l(b);o!==E&&(o=E,i.postEvent("web_app_setup_back_button",!1,b))}function W(b){return g()&&(typeof b.is_visible<"u"&&(e=!!b.is_visible),u()),t}return t.onClick=function(b){return g()&&he("backButtonClicked",b),t},t.offClick=function(b){return g()&&ye("backButtonClicked",b),t},t.show=function(){return W({is_visible:!0})},t.hide=function(){return W({is_visible:!1})},t}();var L=null,Ce={},M=0;if(P.tgWebAppDebug){L=document.createElement("tg-bottom-bar");const e={display:"flex",gap:"7px",font:"600 14px/18px sans-serif",width:"100%",background:ue(),position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"7px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(const o in e)L.style[o]=e[o];document.addEventListener("DOMContentLoaded",function o(n){document.removeEventListener("DOMContentLoaded",o),document.body.appendChild(L)});const t=document.createElement("style");t.innerHTML='tg-bottom-button.shine { position: relative; overflow: hidden; } tg-bottom-button.shine:before { content:""; position: absolute; top: 0; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, .2), transparent); animation: tg-bottom-button-shine 5s ease-in-out infinite; } @-webkit-keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}} @keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}}',L.appendChild(t)}function Ne(){const e=Ce.main._bottomButton,t=Ce.secondary._bottomButton;e.isVisible||t.isVisible?(L.style.display="flex",M=58,e.isVisible&&t.isVisible&&(t.position=="top"?(L.style.flexDirection="column-reverse",M+=51):t.position=="bottom"?(L.style.flexDirection="column",M+=51):t.position=="left"?L.style.flexDirection="row-reverse":t.position=="right"&&(L.style.flexDirection="row"))):(L.style.display="none",M=0),L.style.background=ue(),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=M+"px"),Ae()}const He=function(e){const t=e=="main";if(t)var o="web_app_setup_main_button",n="main_button_pressed",r="mainButtonClicked",l="Continue",g=function(){return C.button_color||"#2481cc"},u=function(){return C.button_text_color||"#ffffff"};else var o="web_app_setup_secondary_button",n="secondary_button_pressed",r="secondaryButtonClicked",l="Cancel",g=function(){return ue()},u=function(){return C.button_color||"#2481cc"};let W=!1,b=!0,E=!1,T=!1;const v=e;let a=l,f=!1,m=!1,x="left";const d={};Object.defineProperty(d,"type",{get:function(){return v},enumerable:!0}),Object.defineProperty(d,"text",{set:function(c){d.setParams({text:c})},get:function(){return a},enumerable:!0}),Object.defineProperty(d,"color",{set:function(c){d.setParams({color:c})},get:function(){return f||g()},enumerable:!0}),Object.defineProperty(d,"textColor",{set:function(c){d.setParams({text_color:c})},get:function(){return m||u()},enumerable:!0}),Object.defineProperty(d,"isVisible",{set:function(c){d.setParams({is_visible:c})},get:function(){return W},enumerable:!0}),Object.defineProperty(d,"isProgressVisible",{get:function(){return T},enumerable:!0}),Object.defineProperty(d,"isActive",{set:function(c){d.setParams({is_active:c})},get:function(){return b},enumerable:!0}),Object.defineProperty(d,"hasShineEffect",{set:function(c){d.setParams({has_shine_effect:c})},get:function(){return E},enumerable:!0}),t||Object.defineProperty(d,"position",{set:function(c){d.setParams({position:c})},get:function(){return x},enumerable:!0});let B=null;i.onEvent(n,q);let A=null;if(P.tgWebAppDebug){A=document.createElement("tg-bottom-button");const c={display:"none",width:"100%",height:"44px",borderRadius:"0",background:"no-repeat right center",padding:"13px 15px",textAlign:"center",boxSizing:"border-box"};for(const I in c)A.style[I]=c[I];L.appendChild(A),A.addEventListener("click",q,!1),A._bottomButton=d,Ce[e]=A}function q(){b&&h(r)}function ge(){const c=d.color,I=d.textColor;if(W){var qe={is_visible:!0,is_active:b,is_progress_visible:T,text:a,color:c,text_color:I,has_shine_effect:E&&b&&!T};t||(qe.position=x)}else var qe={is_visible:!1};return qe}function jt(c){return typeof c>"u"&&(c=ge()),JSON.stringify(c)}function xe(){const c=ge(),I=jt(c);B!==I&&(B=I,i.postEvent(o,!1,c),P.tgWebAppDebug&&Rt(c))}function Rt(c){c.is_visible?(A.style.display="block",A.style.opacity=c.is_active?"1":"0.8",A.style.cursor=c.is_active?"pointer":"auto",A.disabled=!c.is_active,A.innerText=c.text,A.className=c.has_shine_effect?"shine":"",A.style.backgroundImage=c.is_progress_visible?"url('data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewport="0 0 48 48" width="48px" height="48px"><circle cx="50%" cy="50%" stroke="'+c.text_color+'" stroke-width="2.25" stroke-linecap="round" fill="none" stroke-dashoffset="106" r="9" stroke-dasharray="56.52" rotate="-90"><animate attributeName="stroke-dashoffset" attributeType="XML" dur="360s" from="0" to="12500" repeatCount="indefinite"></animate><animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="-90 24 24" to="630 24 24" repeatCount="indefinite"></animateTransform></circle></svg>')+"')":"none",A.style.backgroundColor=c.color,A.style.color=c.text_color):A.style.display="none",Ne()}function Lt(c){if(typeof c.text<"u"){const I=H(c.text);if(!I.length)throw console.error("[Telegram.WebApp] Bottom button text is required",c.text),Error("WebAppBottomButtonParamInvalid");if(I.length>64)throw console.error("[Telegram.WebApp] Bottom button text is too long",I),Error("WebAppBottomButtonParamInvalid");a=I}if(typeof c.color<"u")if(c.color===!1||c.color===null)f=!1;else{const I=ne(c.color);if(!I)throw console.error("[Telegram.WebApp] Bottom button color format is invalid",c.color),Error("WebAppBottomButtonParamInvalid");f=I}if(typeof c.text_color<"u")if(c.text_color===!1||c.text_color===null)m=!1;else{const I=ne(c.text_color);if(!I)throw console.error("[Telegram.WebApp] Bottom button text color format is invalid",c.text_color),Error("WebAppBottomButtonParamInvalid");m=I}if(typeof c.is_visible<"u"){if(c.is_visible&&!d.text.length)throw console.error("[Telegram.WebApp] Bottom button text is required"),Error("WebAppBottomButtonParamInvalid");W=!!c.is_visible}if(typeof c.has_shine_effect<"u"&&(E=!!c.has_shine_effect),!t&&typeof c.position<"u"){if(c.position!="left"&&c.position!="right"&&c.position!="top"&&c.position!="bottom")throw console.error("[Telegram.WebApp] Bottom button posiition is invalid",c.position),Error("WebAppBottomButtonParamInvalid");x=c.position}return typeof c.is_active<"u"&&(b=!!c.is_active),xe(),d}return d.setText=function(c){return d.setParams({text:c})},d.onClick=function(c){return he(r,c),d},d.offClick=function(c){return ye(r,c),d},d.show=function(){return d.setParams({is_visible:!0})},d.hide=function(){return d.setParams({is_visible:!1})},d.enable=function(){return d.setParams({is_active:!0})},d.disable=function(){return d.setParams({is_active:!1})},d.showProgress=function(c){return b=!!c,T=!0,xe(),d},d.hideProgress=function(){return d.isActive||(b=!0),T=!1,xe(),d},d.setParams=Lt,d},ht=He("main"),yt=He("secondary"),Ge=function(){let e=!1;const t={};Object.defineProperty(t,"isVisible",{set:function(b){W({is_visible:b})},get:function(){return e},enumerable:!0});let o=null;i.onEvent("settings_button_pressed",n);function n(){h("settingsButtonClicked")}function r(){return{is_visible:e}}function l(b){return typeof b>"u"&&(b=r()),JSON.stringify(b)}function g(){return y("6.10")?!0:(console.warn("[Telegram.WebApp] SettingsButton is not supported in version "+w),!1)}function u(){const b=r(),E=l(b);o!==E&&(o=E,i.postEvent("web_app_setup_settings_button",!1,b))}function W(b){return g()&&(typeof b.is_visible<"u"&&(e=!!b.is_visible),u()),t}return t.onClick=function(b){return g()&&he("settingsButtonClicked",b),t},t.offClick=function(b){return g()&&ye("settingsButtonClicked",b),t},t.show=function(){return W({is_visible:!0})},t.hide=function(){return W({is_visible:!1})},t}(),vt=function(){const e={};function t(o){if(!y("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+w),e;if(o.type=="impact"){if(o.impact_style!="light"&&o.impact_style!="medium"&&o.impact_style!="heavy"&&o.impact_style!="rigid"&&o.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",o.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(o.type=="notification"){if(o.notification_type!="error"&&o.notification_type!="success"&&o.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",o.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(o.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",o.type),Error("WebAppHapticFeedbackTypeInvalid");return i.postEvent("web_app_trigger_haptic_feedback",!1,o),e}return e.impactOccurred=function(o){return t({type:"impact",impact_style:o})},e.notificationOccurred=function(o){return t({type:"notification",notification_type:o})},e.selectionChanged=function(){return t({type:"selection_change"})},e}(),wt=function(){const e={};function t(o,n,r){if(!y("6.9"))throw console.error("[Telegram.WebApp] CloudStorage is not supported in version "+w),Error("WebAppMethodUnsupported");return Be(o,n,r),e}return e.setItem=function(o,n,r){return t("saveStorageValue",{key:o,value:n},r)},e.getItem=function(o,n){return e.getItems([o],n?function(r,l){r?n(r):n(null,l[o])}:null)},e.getItems=function(o,n){return t("getStorageValues",{keys:o},n)},e.removeItem=function(o,n){return e.removeItems([o],n)},e.removeItems=function(o,n){return t("deleteStorageValues",{keys:o},n)},e.getKeys=function(o){return t("getStorageKeys",{},o)},e}(),At=function(){let e=!1,t=!1,o="unknown",n=!1,r=!1,l=!1,g="";const u={};Object.defineProperty(u,"isInited",{get:function(){return e},enumerable:!0}),Object.defineProperty(u,"isBiometricAvailable",{get:function(){return e&&t},enumerable:!0}),Object.defineProperty(u,"biometricType",{get:function(){return o||"unknown"},enumerable:!0}),Object.defineProperty(u,"isAccessRequested",{get:function(){return n},enumerable:!0}),Object.defineProperty(u,"isAccessGranted",{get:function(){return n&&r},enumerable:!0}),Object.defineProperty(u,"isBiometricTokenSaved",{get:function(){return l},enumerable:!0}),Object.defineProperty(u,"deviceId",{get:function(){return g||""},enumerable:!0});const W={callbacks:[]};let b=!1,E=!1,T=!1;i.onEvent("biometry_info_received",v),i.onEvent("biometry_auth_requested",a),i.onEvent("biometry_token_updated",f);function v(d,B){if(e=!0,B.available?(t=!0,o=B.type||"unknown",B.access_requested?(n=!0,r=!!B.access_granted,l=!!B.token_saved):(n=!1,r=!1,l=!1)):(t=!1,o="unknown",n=!1,r=!1,l=!1),g=B.device_id||"",W.callbacks.length>0){for(let A=0;A<W.callbacks.length;A++){const q=W.callbacks[A];q()}W.callbacks=[]}if(b){const A=b;b=!1,A.callback&&A.callback(r)}h("biometricManagerUpdated")}function a(d,B){const A=B.status=="authorized",q=B.token||"";if(E){const ge=E;E=!1,ge.callback&&ge.callback(A,A?q:null)}h("biometricAuthRequested",A?{isAuthenticated:!0,biometricToken:q}:{isAuthenticated:!1})}function f(d,B){let A=!1;if(t&&n&&(B.status=="updated"?(l=!0,A=!0):B.status=="removed"&&(l=!1,A=!0)),T){const q=T;T=!1,q.callback&&q.callback(A)}h("biometricTokenUpdated",{isUpdated:A})}function m(){return y("7.2")?!0:(console.warn("[Telegram.WebApp] BiometricManager is not supported in version "+w),!1)}function x(){if(!e)throw console.error("[Telegram.WebApp] BiometricManager should be inited before using."),Error("WebAppBiometricManagerNotInited");return!0}return u.init=function(d){return!m()||e||(d&&W.callbacks.push(d),i.postEvent("web_app_biometry_get_info",!1)),u},u.requestAccess=function(d,B){if(!m())return u;if(x(),!t)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(b)throw console.error("[Telegram.WebApp] Access is already requested"),Error("WebAppBiometricManagerAccessRequested");const A={};if(typeof d.reason<"u"){const q=H(d.reason);if(q.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",q),Error("WebAppBiometricRequestAccessParamInvalid");q.length>0&&(A.reason=q)}return b={callback:B},i.postEvent("web_app_biometry_request_access",!1,A),u},u.authenticate=function(d,B){if(!m())return u;if(x(),!t)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!r)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(E)throw console.error("[Telegram.WebApp] Authentication request is already in progress."),Error("WebAppBiometricManagerAuthenticationRequested");const A={};if(typeof d.reason<"u"){const q=H(d.reason);if(q.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",q),Error("WebAppBiometricRequestAccessParamInvalid");q.length>0&&(A.reason=q)}return E={callback:B},i.postEvent("web_app_biometry_request_auth",!1,A),u},u.updateBiometricToken=function(d,B){if(!m())return u;if(d=d||"",d.length>1024)throw console.error("[Telegram.WebApp] Token is too long",d),Error("WebAppBiometricManagerTokenInvalid");if(x(),!t)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!r)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(T)throw console.error("[Telegram.WebApp] Token request is already in progress."),Error("WebAppBiometricManagerTokenUpdateRequested");return T={callback:B},i.postEvent("web_app_biometry_update_token",!1,{token:d}),u},u.openSettings=function(){if(!m())return u;if(x(),!t)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!n)throw console.error("[Telegram.WebApp] Biometric access was not requested yet."),Error("WebAppBiometricManagerBiometricsAccessNotRequested");return r?(console.warn("[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings."),u):(i.postEvent("web_app_biometry_open_settings",!1),u)},u}(),Et=function(){let e=!1,t=!1,o=!1,n=!1;const r={};Object.defineProperty(r,"isInited",{get:function(){return e},enumerable:!0}),Object.defineProperty(r,"isLocationAvailable",{get:function(){return e&&t},enumerable:!0}),Object.defineProperty(r,"isAccessRequested",{get:function(){return o},enumerable:!0}),Object.defineProperty(r,"isAccessGranted",{get:function(){return o&&n},enumerable:!0});const l={callbacks:[]},g={callbacks:[]};i.onEvent("location_checked",u),i.onEvent("location_requested",W);function u(v,a){if(e=!0,a.available?(t=!0,a.access_requested?(o=!0,n=!!a.access_granted):(o=!1,n=!1)):(t=!1,o=!1,n=!1),l.callbacks.length>0){for(let f=0;f<l.callbacks.length;f++){const m=l.callbacks[f];m()}l.callbacks=[]}h("locationManagerUpdated")}function W(v,a){if(!a.available)f=null;else{var f={latitude:a.latitude,longitude:a.longitude,altitude:null,course:null,speed:null,horizontal_accuracy:null,vertical_accuracy:null,course_accuracy:null,speed_accuracy:null};typeof a.altitude<"u"&&a.altitude!==null&&(f.altitude=a.altitude),typeof a.course<"u"&&a.course!==null&&(f.course=a.course%360),typeof a.speed<"u"&&a.speed!==null&&(f.speed=a.speed),typeof a.horizontal_accuracy<"u"&&a.horizontal_accuracy!==null&&(f.horizontal_accuracy=a.horizontal_accuracy),typeof a.vertical_accuracy<"u"&&a.vertical_accuracy!==null&&(f.vertical_accuracy=a.vertical_accuracy),typeof a.course_accuracy<"u"&&a.course_accuracy!==null&&(f.course_accuracy=a.course_accuracy),typeof a.speed_accuracy<"u"&&a.speed_accuracy!==null&&(f.speed_accuracy=a.speed_accuracy)}!a.available||!t||!o||!n?(l.callbacks.push(function(){b(f)}),i.postEvent("web_app_check_location",!1)):b(f)}function b(v){if(g.callbacks.length>0){for(let a=0;a<g.callbacks.length;a++){const f=g.callbacks[a];f(v)}g.callbacks=[]}v!==null&&h("locationRequested",{locationData:v})}function E(){return y("8.0")?!0:(console.warn("[Telegram.WebApp] LocationManager is not supported in version "+w),!1)}function T(){if(!e)throw console.error("[Telegram.WebApp] LocationManager should be inited before using."),Error("WebAppLocationManagerNotInited");return!0}return r.init=function(v){return!E()||e||(v&&l.callbacks.push(v),i.postEvent("web_app_check_location",!1)),r},r.getLocation=function(v){if(!E())return r;if(T(),!t)throw console.error("[Telegram.WebApp] Location is not available on this device."),Error("WebAppLocationManagerLocationNotAvailable");return g.callbacks.push(v),i.postEvent("web_app_request_location"),r},r.openSettings=function(){if(!E())return r;if(T(),!t)throw console.error("[Telegram.WebApp] Location is not available on this device."),Error("WebAppLocationManagerLocationNotAvailable");if(!o)throw console.error("[Telegram.WebApp] Location access was not requested yet."),Error("WebAppLocationManagerLocationAccessNotRequested");return n?(console.warn("[Telegram.WebApp] Location access was granted by the user, no need to go to settings."),r):(i.postEvent("web_app_open_location_settings",!1),r)},r}(),Wt=function(){let e=!1,t=null,o=null,n=null,r=[],l=[];const g={};Object.defineProperty(g,"isStarted",{get:function(){return e},enumerable:!0}),Object.defineProperty(g,"x",{get:function(){return t},enumerable:!0}),Object.defineProperty(g,"y",{get:function(){return o},enumerable:!0}),Object.defineProperty(g,"z",{get:function(){return n},enumerable:!0}),i.onEvent("accelerometer_started",u),i.onEvent("accelerometer_stopped",W),i.onEvent("accelerometer_changed",b),i.onEvent("accelerometer_failed",E);function u(v,a){if(e=!0,r.length>0){for(let f=0;f<r.length;f++){const m=r[f];m(!0)}r=[]}h("accelerometerStarted")}function W(v,a){if(e=!1,l.length>0){for(let f=0;f<l.length;f++){const m=l[f];m(!0)}l=[]}h("accelerometerStopped")}function b(v,a){t=a.x,o=a.y,n=a.z,h("accelerometerChanged")}function E(v,a){if(r.length>0){for(let f=0;f<r.length;f++){const m=r[f];m(!1)}r=[]}h("accelerometerFailed",{error:a.error})}function T(){return y("8.0")?!0:(console.warn("[Telegram.WebApp] Accelerometer is not supported in version "+w),!1)}return g.start=function(v,a){if(v=v||{},!T())return g;const f={},m=parseInt(v.refresh_rate||1e3);return isNaN(m)||m<20||m>1e3?console.warn("[Telegram.WebApp] Accelerometer refresh_rate is invalid",m):f.refresh_rate=m,a&&r.push(a),i.postEvent("web_app_start_accelerometer",!1,f),g},g.stop=function(v){return T()&&(v&&l.push(v),i.postEvent("web_app_stop_accelerometer")),g},g}(),kt=function(){let e=!1,t=null,o=null,n=null,r=!1,l=[],g=[];const u={};Object.defineProperty(u,"isStarted",{get:function(){return e},enumerable:!0}),Object.defineProperty(u,"absolute",{get:function(){return r},enumerable:!0}),Object.defineProperty(u,"alpha",{get:function(){return t},enumerable:!0}),Object.defineProperty(u,"beta",{get:function(){return o},enumerable:!0}),Object.defineProperty(u,"gamma",{get:function(){return n},enumerable:!0}),i.onEvent("device_orientation_started",W),i.onEvent("device_orientation_stopped",b),i.onEvent("device_orientation_changed",E),i.onEvent("device_orientation_failed",T);function W(a,f){if(e=!0,l.length>0){for(let m=0;m<l.length;m++){const x=l[m];x(!0)}l=[]}h("deviceOrientationStarted")}function b(a,f){if(e=!1,g.length>0){for(let m=0;m<g.length;m++){const x=g[m];x(!0)}g=[]}h("deviceOrientationStopped")}function E(a,f){r=!!f.absolute,t=f.alpha,o=f.beta,n=f.gamma,h("deviceOrientationChanged")}function T(a,f){if(l.length>0){for(let m=0;m<l.length;m++){const x=l[m];x(!1)}l=[]}h("deviceOrientationFailed",{error:f.error})}function v(){return y("8.0")?!0:(console.warn("[Telegram.WebApp] DeviceOrientation is not supported in version "+w),!1)}return u.start=function(a,f){if(a=a||{},!v())return u;const m={},x=parseInt(a.refresh_rate||1e3);return isNaN(x)||x<20||x>1e3?console.warn("[Telegram.WebApp] DeviceOrientation refresh_rate is invalid",x):m.refresh_rate=x,m.need_absolute=!!a.need_absolute,f&&l.push(f),i.postEvent("web_app_start_device_orientation",!1,m),u},u.stop=function(a){return v()&&(a&&g.push(a),i.postEvent("web_app_stop_device_orientation")),u},u}(),Tt=function(){let e=!1,t=null,o=null,n=null,r=[],l=[];const g={};Object.defineProperty(g,"isStarted",{get:function(){return e},enumerable:!0}),Object.defineProperty(g,"x",{get:function(){return t},enumerable:!0}),Object.defineProperty(g,"y",{get:function(){return o},enumerable:!0}),Object.defineProperty(g,"z",{get:function(){return n},enumerable:!0}),i.onEvent("gyroscope_started",u),i.onEvent("gyroscope_stopped",W),i.onEvent("gyroscope_changed",b),i.onEvent("gyroscope_failed",E);function u(v,a){if(e=!0,r.length>0){for(let f=0;f<r.length;f++){const m=r[f];m(!0)}r=[]}h("gyroscopeStarted")}function W(v,a){if(e=!1,l.length>0){for(let f=0;f<l.length;f++){const m=l[f];m(!0)}l=[]}h("gyroscopeStopped")}function b(v,a){t=a.x,o=a.y,n=a.z,h("gyroscopeChanged")}function E(v,a){if(r.length>0){for(let f=0;f<r.length;f++){const m=r[f];m(!1)}r=[]}h("gyroscopeFailed",{error:a.error})}function T(){return y("8.0")?!0:(console.warn("[Telegram.WebApp] Gyroscope is not supported in version "+w),!1)}return g.start=function(v,a){if(v=v||{},!T())return g;const f={},m=parseInt(v.refresh_rate||1e3);return isNaN(m)||m<20||m>1e3?console.warn("[Telegram.WebApp] Gyroscope refresh_rate is invalid",m):f.refresh_rate=m,a&&r.push(a),i.postEvent("web_app_start_gyroscope",!1,f),g},g.stop=function(v){return T()&&(v&&l.push(v),i.postEvent("web_app_stop_gyroscope")),g},g}(),pe={};function Pt(e,t){if(t.slug&&pe[t.slug]){const o=pe[t.slug];delete pe[t.slug],o.callback&&o.callback(t.status),h("invoiceClosed",{url:o.url,status:t.status})}}var Q=!1;function ze(e,t){if(Q){const o=Q;Q=!1;let n=null;typeof t.button_id<"u"&&(n=t.button_id),o.callback&&o.callback(n),h("popupClosed",{button_id:n})}}let ee=!1;function St(e,t){if(ee){const o=ee;let n=null;typeof t.data<"u"&&(n=t.data),o.callback&&o.callback(n)&&(ee=!1,i.postEvent("web_app_close_scan_qr_popup",!1)),h("qrTextReceived",{data:n})}}function Ct(e,t){ee=!1,h("scanQrPopupClosed")}function Bt(e,t){if(t.req_id&&N[t.req_id]){const o=N[t.req_id];delete N[t.req_id];let n=null;typeof t.data<"u"&&(n=t.data),o.callback&&o.callback(n),h("clipboardTextReceived",{data:n})}}let fe=!1;function xt(e,t){if(fe){const o=fe;fe=!1,o.callback&&o.callback(t.status=="allowed"),h("writeAccessRequested",{status:t.status})}}function qt(e,t){let o,n,r=0;const l=function(){Be("getRequestedContact",{},function(u,W){W&&W.length?(clearTimeout(n),e(W)):(r+=50,o=setTimeout(l,r))})};n=setTimeout(function(){clearTimeout(o),e("")},t),l()}let de=!1;function Ot(e,t){if(de){const o=de;de=!1;const n=t.status=="sent",r={status:t.status};n?qt(function(l){if(l&&l.length){r.response=l,r.responseUnsafe=O.urlParseQueryString(l);for(const g in r.responseUnsafe){const u=r.responseUnsafe[g];try{(u.substr(0,1)=="{"&&u.substr(-1)=="}"||u.substr(0,1)=="["&&u.substr(-1)=="]")&&(r.responseUnsafe[g]=JSON.parse(u))}catch{}}}o.callback&&o.callback(n,r),h("contactRequested",r)},3e3):(o.callback&&o.callback(n,r),h("contactRequested",r))}}let be=!1;function It(e,t){if(be){const o=be;be=!1;const n=t.status=="downloading";o.callback&&o.callback(n),h("fileDownloadRequested",{status:n?"downloading":"cancelled"})}}function Mt(e,t){if(t.req_id&&N[t.req_id]){const o=N[t.req_id];delete N[t.req_id];let n=null,r=null;typeof t.result<"u"&&(n=t.result),typeof t.error<"u"&&(r=t.error),o.callback&&o.callback(r,n)}}function Be(e,t,o){if(!y("6.9"))throw console.error("[Telegram.WebApp] Method invokeCustomMethod is not supported in version "+w),Error("WebAppMethodUnsupported");const n=je(16),r={req_id:n,method:e,params:t||{}};N[n]={callback:o},i.postEvent("web_app_invoke_custom_method",!1,r)}window.Telegram||(window.Telegram={}),Object.defineProperty(s,"initData",{get:function(){return Y},enumerable:!0}),Object.defineProperty(s,"initDataUnsafe",{get:function(){return U},enumerable:!0}),Object.defineProperty(s,"version",{get:function(){return w},enumerable:!0}),Object.defineProperty(s,"platform",{get:function(){return me},enumerable:!0}),Object.defineProperty(s,"colorScheme",{get:function(){return Z},enumerable:!0}),Object.defineProperty(s,"themeParams",{get:function(){return C},enumerable:!0}),Object.defineProperty(s,"isExpanded",{get:function(){return Re},enumerable:!0}),Object.defineProperty(s,"viewportHeight",{get:function(){return(ie===!1?window.innerHeight:ie)-M},enumerable:!0}),Object.defineProperty(s,"viewportStableHeight",{get:function(){return(se===!1?window.innerHeight:se)-M},enumerable:!0}),Object.defineProperty(s,"safeAreaInset",{get:function(){return G},enumerable:!0}),Object.defineProperty(s,"contentSafeAreaInset",{get:function(){return z},enumerable:!0}),Object.defineProperty(s,"isClosingConfirmationEnabled",{set:function(e){Ze(e)},get:function(){return Ee},enumerable:!0}),Object.defineProperty(s,"isVerticalSwipesEnabled",{set:function(e){De(e)},get:function(){return We},enumerable:!0}),Object.defineProperty(s,"isFullscreen",{get:function(){return D},enumerable:!0}),Object.defineProperty(s,"isOrientationLocked",{set:function(e){ot(e)},get:function(){return oe},enumerable:!0}),Object.defineProperty(s,"isActive",{get:function(){return J},enumerable:!0}),Object.defineProperty(s,"headerColor",{set:function(e){pt(e)},get:function(){return ut()},enumerable:!0}),Object.defineProperty(s,"backgroundColor",{set:function(e){ft(e)},get:function(){return Ue()},enumerable:!0}),Object.defineProperty(s,"bottomBarColor",{set:function(e){dt(e)},get:function(){return ue()},enumerable:!0}),Object.defineProperty(s,"BackButton",{value:_t,enumerable:!0}),Object.defineProperty(s,"MainButton",{value:ht,enumerable:!0}),Object.defineProperty(s,"SecondaryButton",{value:yt,enumerable:!0}),Object.defineProperty(s,"SettingsButton",{value:Ge,enumerable:!0}),Object.defineProperty(s,"HapticFeedback",{value:vt,enumerable:!0}),Object.defineProperty(s,"CloudStorage",{value:wt,enumerable:!0}),Object.defineProperty(s,"BiometricManager",{value:At,enumerable:!0}),Object.defineProperty(s,"Accelerometer",{value:Wt,enumerable:!0}),Object.defineProperty(s,"DeviceOrientation",{value:kt,enumerable:!0}),Object.defineProperty(s,"Gyroscope",{value:Tt,enumerable:!0}),Object.defineProperty(s,"LocationManager",{value:Et,enumerable:!0}),s.isVersionAtLeast=function(e){return y(e)},s.setHeaderColor=function(e){s.headerColor=e},s.setBackgroundColor=function(e){s.backgroundColor=e},s.setBottomBarColor=function(e){s.bottomBarColor=e},s.enableClosingConfirmation=function(){s.isClosingConfirmationEnabled=!0},s.disableClosingConfirmation=function(){s.isClosingConfirmationEnabled=!1},s.enableVerticalSwipes=function(){s.isVerticalSwipesEnabled=!0},s.disableVerticalSwipes=function(){s.isVerticalSwipesEnabled=!1},s.lockOrientation=function(){s.isOrientationLocked=!0},s.unlockOrientation=function(){s.isOrientationLocked=!1},s.requestFullscreen=function(){if(!y("8.0"))throw console.error("[Telegram.WebApp] Method requestFullscreen is not supported in version "+w),Error("WebAppMethodUnsupported");i.postEvent("web_app_request_fullscreen")},s.exitFullscreen=function(){if(!y("8.0"))throw console.error("[Telegram.WebApp] Method exitFullscreen is not supported in version "+w),Error("WebAppMethodUnsupported");i.postEvent("web_app_exit_fullscreen")},s.addToHomeScreen=function(){if(!y("8.0"))throw console.error("[Telegram.WebApp] Method addToHomeScreen is not supported in version "+w),Error("WebAppMethodUnsupported");i.postEvent("web_app_add_to_home_screen")},s.checkHomeScreenStatus=function(e){if(!y("8.0"))throw console.error("[Telegram.WebApp] Method checkHomeScreenStatus is not supported in version "+w),Error("WebAppMethodUnsupported");e&&le.push(e),i.postEvent("web_app_check_home_screen")},s.onEvent=function(e,t){he(e,t)},s.offEvent=function(e,t){ye(e,t)},s.sendData=function(e){if(!e||!e.length)throw console.error("[Telegram.WebApp] Data is required",e),Error("WebAppDataInvalid");if(mt(e)>4096)throw console.error("[Telegram.WebApp] Data is too long",e),Error("WebAppDataInvalid");i.postEvent("web_app_data_send",!1,{data:e})},s.switchInlineQuery=function(e,t){if(!y("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+w),Error("WebAppMethodUnsupported");if(!P.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if(e=e||"",e.length>256)throw console.error("[Telegram.WebApp] Inline query is too long",e),Error("WebAppInlineQueryInvalid");const o=[];if(t){if(!Array.isArray(t))throw console.error("[Telegram.WebApp] Choose chat types should be an array",t),Error("WebAppInlineChooseChatTypesInvalid");const n={users:1,bots:1,groups:1,channels:1};for(let r=0;r<t.length;r++){const l=t[r];if(!n[l])throw console.error("[Telegram.WebApp] Choose chat type is invalid",l),Error("WebAppInlineChooseChatTypeInvalid");n[l]!=2&&(n[l]=2,o.push(l))}}i.postEvent("web_app_switch_inline_query",!1,{query:e,chat_types:o})},s.openLink=function(n,t){const o=document.createElement("A");if(o.href=n,o.protocol!="http:"&&o.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",n),Error("WebAppTgUrlInvalid");var n=o.href;if(t=t||{},y("6.1")){const r={url:n};y("6.4")&&t.try_instant_view&&(r.try_instant_view=!0),y("7.6")&&t.try_browser&&(r.try_browser=t.try_browser),i.postEvent("web_app_open_link",!1,r)}else window.open(n,"_blank")},s.openTelegramLink=function(e,t){const o=document.createElement("A");if(o.href=e,o.protocol!="http:"&&o.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",e),Error("WebAppTgUrlInvalid");if(o.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",e),Error("WebAppTgUrlInvalid");const n=o.pathname+o.search;if(t=t||{},te||y("6.1")){const r={path_full:n};t.force_request&&(r.force_request=!0),i.postEvent("web_app_open_tg_link",!1,r)}else location.href="https://t.me"+n},s.openInvoice=function(e,t){let o=document.createElement("A"),n,r;if(o.href=e,o.protocol!="http:"&&o.protocol!="https:"||o.hostname!="t.me"||!(n=o.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(r=n[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",e),Error("WebAppInvoiceUrlInvalid");if(!y("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+w),Error("WebAppMethodUnsupported");if(pe[r])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");pe[r]={url:e,callback:t},i.postEvent("web_app_open_invoice",!1,{slug:r})},s.showPopup=function(e,t){if(!y("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+w),Error("WebAppMethodUnsupported");if(Q)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");let o="",n="";const r=[],l={};if(typeof e.title<"u"){if(o=H(e.title),o.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",o),Error("WebAppPopupParamInvalid");o.length>0&&(l.title=o)}if(typeof e.message<"u"&&(n=H(e.message)),!n.length)throw console.error("[Telegram.WebApp] Popup message is required",e.message),Error("WebAppPopupParamInvalid");if(n.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",n),Error("WebAppPopupParamInvalid");if(l.message=n,typeof e.buttons<"u"){if(!Array.isArray(e.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",e.buttons),Error("WebAppPopupParamInvalid");for(let g=0;g<e.buttons.length;g++){const u=e.buttons[g],W={};let b="";if(typeof u.id<"u"&&(b=u.id.toString(),b.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",b),Error("WebAppPopupParamInvalid");W.id=b;let E=u.type;if(typeof E>"u"&&(E="default"),W.type=E,!(E=="ok"||E=="close"||E=="cancel"))if(E=="default"||E=="destructive"){let T="";if(typeof u.text<"u"&&(T=H(u.text)),!T.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+E,u.text),Error("WebAppPopupParamInvalid");if(T.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",T),Error("WebAppPopupParamInvalid");W.text=T}else throw console.error("[Telegram.WebApp] Popup button type is invalid",E),Error("WebAppPopupParamInvalid");r.push(W)}}else r.push({id:"",type:"close"});if(r.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(r.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");l.buttons=r,Q={callback:t},i.postEvent("web_app_open_popup",!1,l)},s.showAlert=function(e,t){s.showPopup({message:e},t?function(){t()}:null)},s.showConfirm=function(e,t){s.showPopup({message:e,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},t?function(o){t(o=="ok")}:null)},s.showScanQrPopup=function(e,t){if(!y("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+w),Error("WebAppMethodUnsupported");if(ee)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");let o="";const n={};if(typeof e.text<"u"){if(o=H(e.text),o.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",o),Error("WebAppScanQrPopupParamInvalid");o.length>0&&(n.text=o)}ee={callback:t},i.postEvent("web_app_open_scan_qr_popup",!1,n)},s.closeScanQrPopup=function(){if(!y("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+w),Error("WebAppMethodUnsupported");ee=!1,i.postEvent("web_app_close_scan_qr_popup",!1)},s.readTextFromClipboard=function(e){if(!y("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+w),Error("WebAppMethodUnsupported");const t=je(16),o={req_id:t};N[t]={callback:e},i.postEvent("web_app_read_text_from_clipboard",!1,o)},s.requestWriteAccess=function(e){if(!y("6.9"))throw console.error("[Telegram.WebApp] Method requestWriteAccess is not supported in version "+w),Error("WebAppMethodUnsupported");if(fe)throw console.error("[Telegram.WebApp] Write access is already requested"),Error("WebAppWriteAccessRequested");fe={callback:e},i.postEvent("web_app_request_write_access")},s.requestContact=function(e){if(!y("6.9"))throw console.error("[Telegram.WebApp] Method requestContact is not supported in version "+w),Error("WebAppMethodUnsupported");if(de)throw console.error("[Telegram.WebApp] Contact is already requested"),Error("WebAppContactRequested");de={callback:e},i.postEvent("web_app_request_phone")},s.downloadFile=function(e,t){if(!y("8.0"))throw console.error("[Telegram.WebApp] Method downloadFile is not supported in version "+w),Error("WebAppMethodUnsupported");if(be)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppDownloadFilePopupOpened");const o=document.createElement("A"),n={};if(!e||!e.url||!e.url.length)throw console.error("[Telegram.WebApp] Url is required"),Error("WebAppDownloadFileParamInvalid");if(o.href=e.url,o.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",url),Error("WebAppDownloadFileParamInvalid");if(n.url=o.href,!e||!e.file_name||!e.file_name.length)throw console.error("[Telegram.WebApp] File name is required"),Error("WebAppDownloadFileParamInvalid");n.file_name=e.file_name,be={callback:t},i.postEvent("web_app_request_file_download",!1,n)},s.shareToStory=function(e,t){if(t=t||{},!y("7.8"))throw console.error("[Telegram.WebApp] Method shareToStory is not supported in version "+w),Error("WebAppMethodUnsupported");const o=document.createElement("A");if(o.href=e,o.protocol!="http:"&&o.protocol!="https:")throw console.error("[Telegram.WebApp] Media url protocol is not supported",url),Error("WebAppMediaUrlInvalid");const n={};if(n.media_url=o.href,typeof t.text<"u"){const r=H(t.text);if(r.length>2048)throw console.error("[Telegram.WebApp] Text is too long",r),Error("WebAppShareToStoryParamInvalid");r.length>0&&(n.text=r)}if(typeof t.widget_link<"u"){if(t.widget_link=t.widget_link||{},o.href=t.widget_link.url,o.protocol!="http:"&&o.protocol!="https:")throw console.error("[Telegram.WebApp] Link protocol is not supported",url),Error("WebAppShareToStoryParamInvalid");const r={url:o.href};if(typeof t.widget_link.name<"u"){const l=H(t.widget_link.name);if(l.length>48)throw console.error("[Telegram.WebApp] Link name is too long",l),Error("WebAppShareToStoryParamInvalid");l.length>0&&(r.name=l)}n.widget_link=r}i.postEvent("web_app_share_to_story",!1,n)},s.shareMessage=function(e,t){if(!y("8.0"))throw console.error("[Telegram.WebApp] Method shareMessage is not supported in version "+w),Error("WebAppMethodUnsupported");if($)throw console.error("[Telegram.WebApp] Share message is already opened"),Error("WebAppShareMessageOpened");$={callback:t},i.postEvent("web_app_send_prepared_message",!1,{id:e})},s.setEmojiStatus=function(e,t,o){if(t=t||{},!y("8.0"))throw console.error("[Telegram.WebApp] Method setEmojiStatus is not supported in version "+w),Error("WebAppMethodUnsupported");const n={};if(n.custom_emoji_id=e,typeof t.duration<"u"&&(n.duration=t.duration),X)throw console.error("[Telegram.WebApp] Emoji status is already requested"),Error("WebAppEmojiStatusRequested");X={callback:o},i.postEvent("web_app_set_emoji_status",!1,n)},s.requestEmojiStatusAccess=function(e){if(!y("8.0"))throw console.error("[Telegram.WebApp] Method requestEmojiStatusAccess is not supported in version "+w),Error("WebAppMethodUnsupported");if(ae)throw console.error("[Telegram.WebApp] Emoji status permission is already requested"),Error("WebAppEmojiStatusAccessRequested");ae={callback:e},i.postEvent("web_app_request_emoji_status_access")},s.invokeCustomMethod=function(e,t,o){Be(e,t,o)},s.ready=function(){i.postEvent("web_app_ready")},s.expand=function(){i.postEvent("web_app_expand")},s.close=function(e){e=e||{};const t={};y("7.6")&&e.return_back&&(t.return_back=!0),i.postEvent("web_app_close",!1,t)},window.Telegram.WebApp=s,Te(),Pe(),Se(),Ae(),P.tgWebAppShowSettings&&Ge.show(),window.addEventListener("resize",Oe),te&&document.addEventListener("click",$e),i.onEvent("theme_changed",j),i.onEvent("viewport_changed",_e),i.onEvent("safe_area_changed",Qe),i.onEvent("content_safe_area_changed",Je),i.onEvent("visibility_changed",Ke),i.onEvent("invoice_closed",Pt),i.onEvent("popup_closed",ze),i.onEvent("qr_text_received",St),i.onEvent("scan_qr_popup_closed",Ct),i.onEvent("clipboard_text_received",Bt),i.onEvent("write_access_requested",xt),i.onEvent("phone_requested",Ot),i.onEvent("file_download_requested",It),i.onEvent("custom_method_invoked",Mt),i.onEvent("fullscreen_changed",et),i.onEvent("fullscreen_failed",tt),i.onEvent("home_screen_added",nt),i.onEvent("home_screen_checked",rt),i.onEvent("prepared_message_sent",it),i.onEvent("prepared_message_failed",st),i.onEvent("emoji_status_set",lt),i.onEvent("emoji_status_failed",at),i.onEvent("emoji_status_access_requested",ct),i.postEvent("web_app_request_theme"),i.postEvent("web_app_request_viewport"),i.postEvent("web_app_request_safe_area"),i.postEvent("web_app_request_content_safe_area")})();
